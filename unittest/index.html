<html>
<head>
  <script type="text/javascript">
    window.DLR = {path: "../bin3"}
    //DLR.settings = {debug: true}
  </script>
  <script src="../bin3/dlr.js" type="text/javascript"></script>
  <script type="text/python" src="repl.py" defer="true"></script>
  <title>unittest</title>
</head>
<body>
  <script type="application/x-zip-compressed" src="Lib.zip"></script>

  <div id="message" style="font-size: 24px">Loading ...</div>
  <script type="text/python">
    document.message.innerHTML = "Hello from Python!"  

    def say_ouch(s, e):
      s.innerHTML = "Ouch!"
     
    document.message.onclick += say_ouch
  </script>

  <script type="text/python">
    if document.QueryString.ContainsKey("test"):
      import sys
      sys.path.append("Lib")

      import repl
      repl.show()
      
      import unittest

      class TestHello(unittest.TestCase):
        def testgreeting(self):
          self.assertEqual(document.message.innerHTML, "Hello from Python!")

        def testsayouch(self):
          say_ouch(document.message, None)
          self.assertEqual(document.message.innerHTML, "Ouch!")

      suite = unittest.TestLoader().loadTestsFromTestCase(TestHello)
      unittest.TextTestRunner(verbosity=2).run(suite)
  </script>
</body>
</html>
